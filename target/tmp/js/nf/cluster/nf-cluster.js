(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.ClusterTable","nf.ErrorHandler","nf.Storage"],function(d,e,g,f,c){return(nf.Cluster=b(d,e,g,f,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Cluster=b(require("jquery"),require("nf.Common"),require("nf.ClusterTable"),require("nf.ErrorHandler"),require("nf.Storage")))}else{nf.Cluster=b(a.$,a.nf.Common,a.nf.ClusterTable,a.nf.ErrorHandler,a.nf.Storage)}}}(this,function(c,b,h,e,d){c(document).ready(function(){g.init()});var a={urls:{banners:"../nifi-api/flow/banners",about:"../nifi-api/flow/about",currentUser:"../nifi-api/flow/current-user"}};var f=function(){return c.ajax({type:"GET",url:a.urls.currentUser,dataType:"json"}).done(function(j){b.setCurrentUser(j)}).fail(e.handleAjaxError)};var i=function(){c("#refresh-button").click(function(){h.loadClusterTable()});return c.Deferred(function(j){if(top===window){c.ajax({type:"GET",url:a.urls.banners,dataType:"json"}).done(function(o){if(b.isDefinedAndNotNull(o.banners)){if(b.isDefinedAndNotNull(o.banners.headerText)&&o.banners.headerText!==""){var l=c("#banner-header").text(o.banners.headerText).show();var n=function(p){var q=c("#"+p);q.css("top",(parseInt(l.css("height"),10)+parseInt(q.css("top"),10))+"px")};n("counters")}if(b.isDefinedAndNotNull(o.banners.footerText)&&o.banners.footerText!==""){var k=c("#banner-footer").text(o.banners.footerText).show();var m=function(p){var q=c("#"+p);q.css("bottom",parseInt(k.css("height"),10)+"px")};m("counters")}}j.resolve()}).fail(function(m,k,l){e.handleAjaxError(m,k,l);j.reject()})}else{j.resolve()}}).promise()};var g={init:function(){d.init();f().done(function(){var j=function(){if(top===window){c("body").css({height:c(window).height()+"px",width:c(window).width()+"px"});c("#cluster").css("margin",40);c("#cluster-table").css("bottom",127);c("#cluster-refresh-container").css("margin",40)}};j();h.init();h.resetTableSize();h.loadClusterTable().done(function(){i().done(function(){c.ajax({type:"GET",url:a.urls.about,dataType:"json"}).done(function(l){var k=l.about;var m=k.title+" Cluster";document.title=m;c("#counters-header-text").text(m)}).fail(e.handleAjaxError);c(window).on("resize",function(s){j();var l=c(".dialog");for(var q=0,r=l.length;q<r;q++){if(c(l[q]).is(":visible")){setTimeout(function(k){k.modal("resize")},50,c(l[q]))}}var t=c('*[class*="slickgrid_"]');for(var p=0,r=t.length;p<r;p++){if(c(t[p]).is(":visible")){setTimeout(function(k){k.data("gridInstance").resizeCanvas()},50,c(t[p]))}}var n=c(".tab-container");var m=[];for(var o=0,r=n.length;o<r;o++){if(c(n[o]).is(":visible")){m.push(c("#"+c(n[o]).attr("id")+"-content"))}}c.each(m,function(k,u){b.toggleScrollable(u.get(0))})})})})})}};return g}));