(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Dialog","nf.Common"],function(d,c,e){return(nf.ErrorHandler=b(d,c,e))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ErrorHandler=b(require("jquery"),require("nf.Dialog"),require("nf.Common")))}else{nf.ErrorHandler=b(a.$,a.nf.Dialog,a.nf.Common)}}}(this,function(c,b,d){var a={handleAjaxError:function(h,e,f){if(e==="canceled"){if(c("#splash").is(":visible")){c("#message-title").text("Session Expired");c("#message-content").text("Your session has expired. Please reload to log in again.");c("#message-pane").show()}else{b.showOkDialog({headerText:"Session Expired",dialogContent:"Your session has expired. Please press Ok to log in again.",okHandler:function(){window.location="/nifi"}})}return}if(c("#splash").is(":visible")){if(h.status===401){c("#message-title").text("Unauthorized")}else{if(h.status===403){c("#message-title").text("Insufficient Permissions")}else{if(h.status===409){c("#message-title").text("Invalid State")}else{if(h.status===413){c("#message-title").text("Payload Too Large")}else{c("#message-title").text("An unexpected error has occurred")}}}}if(c.trim(h.responseText)===""){c("#message-content").text("Please check the logs.")}else{c("#message-content").text(h.responseText)}c("#message-pane").show();return}if(h.status===400||h.status===404||h.status===409||h.status==413||h.status===503){b.showOkDialog({headerText:"Error",dialogContent:d.escapeHtml(h.responseText)})}else{if(h.status===403){b.showOkDialog({headerText:"Insufficient Permissions",dialogContent:d.escapeHtml(h.responseText)})}else{if(h.status<99||h.status===12007||h.status===12029){var g="Please ensure the application is running and check the logs for any errors.";if(d.isDefinedAndNotNull(e)){if(e==="timeout"){g="Request has timed out. Please ensure the application is running and check the logs for any errors."}else{if(e==="abort"){g="Request has been aborted."}else{if(e==="No Transport"){g="Request transport mechanism failed. Please ensure the host where the application is running is accessible."}}}}c("#message-title").text("Unable to communicate with NiFi");c("#message-content").text(g)}else{if(h.status===401){c("#message-title").text("Unauthorized");if(c.trim(h.responseText)===""){c("#message-content").text("Authentication is required to use this NiFi.")}else{c("#message-content").text(h.responseText)}}else{if(h.status===500){c("#message-title").text("An unexpected error has occurred");if(c.trim(h.responseText)===""){c("#message-content").text("An error occurred communicating with the application core. Please check the logs and fix any configuration issues before restarting.")}else{c("#message-content").text(h.responseText)}}else{if(h.status===200||h.status===201){c("#message-title").text("Parse Error");if(c.trim(h.responseText)===""){c("#message-content").text("Unable to interpret response from NiFi.")}else{c("#message-content").text(h.responseText)}}else{c("#message-title").text(h.status+": Unexpected Response");c("#message-content").text("An unexpected error has occurred. Please check the logs.")}}}}c("#message-pane").show()}}},handleConfigurationUpdateAjaxError:function(h,e,f){if(h.status===400){var i=h.responseText.split("\n");var g;if(i.length===1){g=c("<span></span>").text(i[0])}else{g=d.formatUnorderedList(i)}b.showOkDialog({dialogContent:g,headerText:"Configuration Error"})}else{a.handleAjaxError(h,e,f)}}};return a}));