(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","Slick","nf.Common","nf.ErrorHandler","nf.StatusHistory","nf.ProcessorDetails","nf.ConnectionDetails","nf.ng.Bridge","lodash-core"],function(e,c,d,h,i,g,k,f,j){return(nf.SummaryTable=b(e,c,d,h,i,g,k,f,j))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.SummaryTable=b(require("jquery"),require("Slick"),require("nf.Common"),require("nf.ErrorHandler"),require("nf.StatusHistory"),require("nf.ProcessorDetails"),require("nf.ConnectionDetails"),require("nf.ng.Bridge"),require("lodash-core")))}else{nf.SummaryTable=b(a.$,a.Slick,a.nf.Common,a.nf.ErrorHandler,a.nf.StatusHistory,a.nf.ProcessorDetails,a.nf.ConnectionDetails,a.nf.ng.Bridge,a._)}}}(this,function(e,x,i,h,c,q,p,G,E){var C={urls:{api:"../nifi-api",status:"../nifi-api/flow/process-groups/root/status",systemDiagnostics:"../nifi-api/system-diagnostics",flowConfig:"../nifi-api/flow/config"}};var y="&nbsp;&nbsp;|&nbsp;&nbsp;";var F=function(I,H){if(top!==window){if(i.isDefinedAndNotNull(parent.nf)&&i.isDefinedAndNotNull(parent.nf.CanvasUtils)&&i.isDefinedAndNotNull(parent.nf.Shell)){parent.nf.CanvasUtils.showComponent(I,H);parent.$("#shell-close-button").click()}}};var n=function(V,S,P,M,I){var R=E.get(I,"predictions.predictedMillisUntilBytesBackpressure",-1);var O=E.get(I,"predictions.predictedMillisUntilCountBackpressure",-1);var J=E.get(I,"percentUseCount",0);var N=E.get(I,"percentUseBytes",0);var U=[{label:"object",timeToBackPressure:O},{label:"size",timeToBackPressure:R},];var T=[{label:"object",percent:J},{label:"size",percent:N}];var Q=E.maxBy(T,"percent");if(Q.percent>=100){return"now ("+Q.label+")"}var H=U.filter(function(W){return W.timeToBackPressure>=0});if(E.isEmpty(H)){return"NA"}var K=E.minBy(H,"timeToBackPressure");var L=i.formatPredictedDuration(K.timeToBackPressure);return i.escapeHtml(L)+" ("+K.label+")"};var r={id:"backpressurePrediction",field:"backpressurePrediction",name:"Estimated Time to Back Pressure",sortable:true,defaultSortAsc:false,formatter:n,resize:true,toolTip:"Estimated Time to Back Pressure"};var u=function(av){e("#summary-filter").keyup(function(){D()});e("#summary-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"Processors",tabContentId:"processor-summary-tab-content"},{name:"Input Ports",tabContentId:"input-port-summary-tab-content"},{name:"Output Ports",tabContentId:"output-port-summary-tab-content"},{name:"Remote Process Groups",tabContentId:"remote-process-group-summary-tab-content"},{name:"Connections",tabContentId:"connection-summary-tab-content"},{name:"Process Groups",tabContentId:"process-group-summary-tab-content"}],select:function(){var be=e(this).text();if(be==="Processors"){var bd=e("#processor-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bd)){bd.resizeCanvas();e("#displayed-items").text(i.formatInteger(bd.getData().getLength()));e("#total-items").text(i.formatInteger(bd.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"},{text:"by type",value:"type"}],select:function(bj){D()}})}else{if(be==="Connections"){var bc=e("#connection-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bc)){bc.resizeCanvas();e("#displayed-items").text(i.formatInteger(bc.getData().getLength()));e("#total-items").text(i.formatInteger(bc.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by source",value:"sourceName"},{text:"by name",value:"name"},{text:"by destination",value:"destinationName"}],select:function(bj){D()}})}else{if(be==="Input Ports"){var bi=e("#input-port-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bi)){bi.resizeCanvas();e("#displayed-items").text(i.formatInteger(bi.getData().getLength()));e("#total-items").text(i.formatInteger(bi.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bj){D()}})}else{if(be==="Output Ports"){var bh=e("#output-port-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bh)){bh.resizeCanvas();e("#displayed-items").text(i.formatInteger(bh.getData().getLength()));e("#total-items").text(i.formatInteger(bh.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bj){D()}})}else{if(be==="Remote Process Groups"){var bg=e("#remote-process-group-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bg)){bg.resizeCanvas();e("#displayed-items").text(i.formatInteger(bg.getData().getLength()));e("#total-items").text(i.formatInteger(bg.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"},{text:"by uri",value:"targetUri"}],select:function(bj){D()}})}else{var bf=e("#process-group-summary-table").data("gridInstance");if(i.isDefinedAndNotNull(bf)){bf.resizeCanvas();e("#displayed-items").text(i.formatInteger(bf.getData().getLength()));e("#total-items").text(i.formatInteger(bf.getData().getLength()))}e("#summary-filter-type").combo({options:[{text:"by name",value:"name"}],select:function(bj){D()}})}}}}}e("#summary-filter").val("");D()}});var aI=function(bh,bd,bg,bf,bc){var be='<div title="View Processor Details" class="pointer show-processor-details fa fa-info-circle"></div>';if(!i.isEmpty(bc.bulletins)){be+='<div class="has-bulletins fa fa-sticky-note-o"></div><span class="hidden row-id">'+i.escapeHtml(bc.id)+"</span>"}return be};var aB=function(bh,bd,bg,bf,bc){var be="";if(av&&bc.executionNode==="PRIMARY"){be+='<div class="is-primary-icon" title="This component is only scheduled to execute on the Primary Node">P</div>'}be+=i.escapeHtml(bg);return be};var aG=function(bg,bd,bf,be,bc){return i.escapeHtml(bc.read)+y+i.escapeHtml(bc.written)};var ae=function(bg,bd,bf,be,bc){return i.formatInteger(bc.tasks)+y+i.escapeHtml(bc.tasksDuration)};var H=function(bg,bd,bf,be,bc){return i.formatValue(bf)};var bb=function(bk,bi,bh,be,bc){var bf="";var bg="";if(bc.terminatedThreadCount>0){bf="("+bc.activeThreadCount+y+bc.terminatedThreadCount+")";bg="Threads: (Active / Terminated)"}else{if(bc.activeThreadCount>0){bf="("+bc.activeThreadCount+")";bg="Active Threads"}}var bd;switch(bh.toLowerCase()){case"running":bd="fa fa-play running";break;case"stopped":bd="fa fa-stop stopped";break;case"enabled":bd="fa fa-flash enabled";break;case"disabled":bd="icon icon-enable-false disabled";break;case"validating":bd="fa fa-spin fa-circle-notch validating";break;case"invalid":bd="fa fa-warning invalid";break;default:bd=""}var bj='<div layout="row"><div class="'+bd+'"></div><div class="status-text">'+i.escapeHtml(bh)+'</div><div style="float: left; margin-left: 4px;" title="'+bg+'">'+i.escapeHtml(bf)+"</div></div>";return bj};var a5={id:"name",field:"name",name:"Name",formatter:aB,sortable:true,resizable:true};var aW={id:"runStatus",field:"runStatus",name:"Run Status",formatter:bb,sortable:true};var ay={id:"input",field:"input",name:'<span class="input-title">In</span>&nbsp;(<span class="input-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aF={id:"io",field:"io",name:'<span class="read-title">Read</span>'+y+'<span class="written-title">Write</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Data size in the last 5 min",formatter:aG,sortable:true,defaultSortAsc:false,resizable:true};var a7={id:"output",field:"output",name:'<span class="output-title">Out</span>&nbsp;(<span class="output-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aD={id:"tasks",field:"tasks",name:'<span class="tasks-title">Tasks</span>'+y+'<span class="time-title">Time</span>&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / duration in the last 5 min",formatter:ae,sortable:true,defaultSortAsc:false,resizable:true};var aH=[{id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:aI,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"},a5,{id:"type",field:"type",name:"Type",sortable:true,resizable:true,formatter:i.genericValueFormatter},{id:"parentGroup",field:"parentProcessGroupName",name:"Process Group",sortable:true,resizable:true,formatter:i.genericValueFormatter,toolTip:"Parent Process Group name"},aW,ay,aF,a7,aD];var aZ=(top!==window);if(av||aZ||i.SUPPORTS_SVG){var a3=function(bh,bd,bg,bf,bc){var be="";if(aZ){be+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Processor in '+i.escapeHtml(bc.processGroupNamePath)+'"></div>'}if(i.SUPPORTS_SVG){be+='<div class="pointer show-processor-status-history fa fa-area-chart" title="View Status History"></div>'}if(av){be+='<div class="pointer show-cluster-processor-summary fa fa-cubes" title="View Processor Details"></div>'}return be};aH.push({id:"actions",name:"&nbsp;",formatter:a3,resizable:false,sortable:false,width:75,maxWidth:75})}var az={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aJ=new x.Data.DataView({inlineFilters:false});aJ.setItems([]);aJ.setFilterArgs({searchString:"",property:"name"});aJ.setFilter(l);A("processor-summary-table",{columnId:"name",sortAsc:true},aJ);var a8=new x.Grid("#processor-summary-table",aJ,aH,az);a8.setSelectionModel(new x.RowSelectionModel());a8.registerPlugin(new x.AutoTooltips());a8.setSortColumn("name",true);a8.onSort.subscribe(function(bd,bc){A("processor-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},aJ)});a8.onClick.subscribe(function(bf,bc){var be=e(bf.target);var bd=aJ.getItem(bc.row);if(a8.getColumns()[bc.cell].id==="actions"){if(be.hasClass("go-to")){F(bd.groupId,bd.id)}else{if(be.hasClass("show-processor-status-history")){c.showProcessorChart(bd.groupId,bd.id)}else{if(be.hasClass("show-cluster-processor-summary")){m(bd.groupId,bd.id);e("#summary-loading-container").hide();e("#cluster-processor-summary-dialog").modal("show");P.resizeCanvas()}}}}else{if(a8.getColumns()[bc.cell].id==="moreDetails"){if(be.hasClass("show-processor-details")){q.showDetails(bd.groupId,bd.id)}}}});aJ.onRowCountChanged.subscribe(function(bd,bc){a8.updateRowCount();a8.render();if(e("#processor-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(bc.current))}});aJ.onRowsChanged.subscribe(function(bd,bc){a8.invalidateRows(bc.rows);a8.render()});e("#processor-summary-table").data("gridInstance",a8).on("mouseenter","div.slick-cell",function(bg){var bd=e(this).find("div.has-bulletins");if(bd.length&&!bd.data("qtip")){var bh=e(this).find("span.row-id").text();var bc=aJ.getItemById(bh);var bf=i.getFormattedBulletins(bc.bulletins);var be=i.formatUnorderedList(bf);if(i.isDefinedAndNotNull(be)){bd.qtip(e.extend({},i.config.tooltipConfig,{content:be,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-processor-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Processor Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-processor-id").text("");e("#cluster-processor-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-processor-refresh-button").click(function(){m(e("#cluster-processor-group-id").text(),e("#cluster-processor-id").text())});var O=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aW,ay,aF,a7,aD];var a2={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aS=new x.Data.DataView({inlineFilters:false});aS.setItems([]);A("cluster-processor-summary-table",{columnId:"node",sortAsc:true},aS);var P=new x.Grid("#cluster-processor-summary-table",aS,O,a2);P.setSelectionModel(new x.RowSelectionModel());P.registerPlugin(new x.AutoTooltips());P.setSortColumn("node",true);P.onSort.subscribe(function(bd,bc){A("cluster-processor-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},aS)});aS.onRowCountChanged.subscribe(function(bd,bc){P.updateRowCount();P.render()});aS.onRowsChanged.subscribe(function(bd,bc){P.invalidateRows(bc.rows);P.render()});e("#cluster-processor-summary-table").data("gridInstance",P);var aP=function(bg,bd,bf,be,bc){return'<div class="pointer show-connection-details fa fa-info-circle" title="View Connection Details"></div>'};var a6=function(bc){return E.isNumber(bc)&&bc>=0?E.clamp(bc,0,100)+"%":"NA"};var W=function(bi,be,bh,bf,bd){var bc="NA";if(i.isDefinedAndNotNull(bd.percentUseCount)){bc=a6(bd.percentUseCount)}var bg="NA";if(i.isDefinedAndNotNull(bd.percentUseBytes)){bg=a6(bd.percentUseBytes)}return i.escapeHtml(bc)+y+i.escapeHtml(bg)};var aY={id:"queued",field:"queued",name:'<span class="queued-title">Queue</span>&nbsp;(<span class="queued-size-title">Size</span>)',sortable:true,defaultSortAsc:false,resize:true,formatter:i.genericValueFormatter};var V={id:"backpressure",field:"backpressure",name:'Threshold %: <span class="backpressure-object-title">Queue</span>&nbsp;&nbsp;|&nbsp;&nbsp;<span class="backpressure-data-size-title">Size</span>',sortable:true,defaultSortAsc:false,formatter:W,resize:true};var aw=[{id:"moreDetails",name:"&nbsp;",sortable:false,resizable:false,formatter:aP,width:50,maxWidth:50},{id:"name",field:"name",name:"Name",sortable:true,resizable:true,formatter:H},aY,V,r,ay,{id:"sourceName",field:"sourceName",name:"From Source",sortable:true,resizable:true,formatter:i.genericValueFormatter},a7,{id:"destinationName",field:"destinationName",name:"To Destination",sortable:true,resizable:true,formatter:i.genericValueFormatter}];if(av||aZ||i.SUPPORTS_SVG){var K=function(bh,bd,bg,bf,bc){var be="";if(aZ){be+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Connection"></div>'}if(i.SUPPORTS_SVG){be+='<div class="pointer show-connection-status-history fa fa-area-chart" title="View Status History"></div>'}if(av){be+='<div class="pointer show-cluster-connection-summary fa fa-cubes" title="View Connection Details"></div>'}return be};aw.push({id:"actions",name:"&nbsp;",formatter:K,resizable:false,sortable:false,width:75,maxWidth:75})}var ac={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var an=new x.Data.DataView({inlineFilters:false});an.setItems([]);an.setFilterArgs({searchString:"",property:"sourceName"});an.setFilter(l);A("connection-summary-table",{columnId:"sourceName",sortAsc:true},an);var aM=new x.Grid("#connection-summary-table",an,aw,ac);aM.setSelectionModel(new x.RowSelectionModel());aM.registerPlugin(new x.AutoTooltips());aM.setSortColumn("sourceName",true);aM.onSort.subscribe(function(bd,bc){A("connection-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},an)});aM.onClick.subscribe(function(bf,bc){var be=e(bf.target);var bd=an.getItem(bc.row);if(aM.getColumns()[bc.cell].id==="actions"){if(be.hasClass("go-to")){F(bd.groupId,bd.id)}else{if(be.hasClass("show-connection-status-history")){c.showConnectionChart(bd.groupId,bd.id)}else{if(be.hasClass("show-cluster-connection-summary")){b(bd.groupId,bd.id);e("#summary-loading-container").hide();e("#cluster-connection-summary-dialog").modal("show");aj.resizeCanvas()}}}}else{if(aM.getColumns()[bc.cell].id==="moreDetails"){if(be.hasClass("show-connection-details")){p.showDetails(bd.groupId,bd.id)}}}});an.onRowCountChanged.subscribe(function(bd,bc){aM.updateRowCount();aM.render();if(e("#connection-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(bc.current))}});an.onRowsChanged.subscribe(function(bd,bc){aM.invalidateRows(bc.rows);aM.render()});e("#connection-summary-table").data("gridInstance",aM);e("#cluster-connection-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Connection Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-connection-id").text("");e("#cluster-connection-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-connection-refresh-button").click(function(){b(e("#cluster-connection-group-id").text(),e("#cluster-connection-id").text())});var R=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aY,V,r,ay,a7];var L={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var J=new x.Data.DataView({inlineFilters:false});J.setItems([]);A("cluster-connection-summary-table",{columnId:"node",sortAsc:true},J);var aj=new x.Grid("#cluster-connection-summary-table",J,R,L);aj.setSelectionModel(new x.RowSelectionModel());aj.registerPlugin(new x.AutoTooltips());aj.setSortColumn("node",true);aj.onSort.subscribe(function(bd,bc){A("cluster-connection-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},J)});J.onRowCountChanged.subscribe(function(bd,bc){aj.updateRowCount();aj.render()});J.onRowsChanged.subscribe(function(bd,bc){aj.invalidateRows(bc.rows);aj.render()});e("#cluster-connection-summary-table").data("gridInstance",aj);var U=function(bh,bd,bg,bf,bc){var be="";if(!i.isEmpty(bc.bulletins)){be+='<div class="has-bulletins fa fa-sticky-note-o" style="margin-left: 5px; float: left;"></div><span class="hidden row-id">'+i.escapeHtml(bc.id)+"</span>"}return be};var aN={id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:U,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"};var ag={id:"transferred",field:"transferred",name:'<span class="transferred-title">Transferred</span>&nbsp;(<span class="transferred-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size transferred to and from connections in the last 5 min",resizable:true,defaultSortAsc:false,sortable:true,formatter:i.genericValueFormatter};var ad={id:"sent",field:"sent",name:'<span class="sent-title">Sent</span>&nbsp;(<span class="sent-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aK={id:"received",field:"received",name:'<span class="received-title">Received</span>&nbsp;(<span class="received-size-title">Size</span>)&nbsp;<span style="font-weight: normal; overflow: hidden;">5 min</span>',toolTip:"Count / data size in the last 5 min",sortable:true,defaultSortAsc:false,resizable:true,formatter:i.genericValueFormatter};var aX=function(bi,bd,bh,be,bc){var bg,bf;switch(bh){case"UP_TO_DATE":bg="fa fa-check up-to-date";bf="Up to date";break;case"LOCALLY_MODIFIED":bg="fa fa-asterisk locally-modified";bf="Locally modified";break;case"STALE":bg="fa fa-arrow-circle-up stale";bf="Stale";break;case"LOCALLY_MODIFIED_AND_STALE":bg="fa fa-exclamation-circle locally-modified-and-stale";bf="Locally modified and stale";break;case"SYNC_FAILURE":bg="fa fa-question sync-failure";bf="Sync failure";break;default:bg="";bf=""}return'<div layout="row"><div class="'+bg+'"></div><div class="status-text">'+bf+"</div></div>"};var S=[aN,{id:"name",field:"name",name:"Name",sortable:true,resizable:true,formatter:H},{id:"versionedFlowState",field:"versionedFlowState",name:"Version State",sortable:true,resizable:true,formatter:aX},ag,ay,aF,a7,ad,aK];if(av||aZ||i.SUPPORTS_SVG){var a4=function(bh,bd,bg,bf,bc){var be="";if(aZ&&bc.groupId!==null){be+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Process Group"></div>'}if(i.SUPPORTS_SVG){be+='<div class="pointer show-process-group-status-history fa fa-area-chart" title="View Status History"></div>'}if(av){be+='<div class="pointer show-cluster-process-group-summary fa fa-cubes" title="View Process Group Details"></div>'}return be};S.push({id:"actions",name:"&nbsp;",formatter:a4,resizable:false,sortable:false,width:75,maxWidth:75})}var ai={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var ax=new x.Data.DataView({inlineFilters:false});ax.setItems([]);ax.setFilterArgs({searchString:"",property:"name"});ax.setFilter(l);A("process-group-summary-table",{columnId:"name",sortAsc:true},ax);var aU=new x.Grid("#process-group-summary-table",ax,S,ai);aU.setSelectionModel(new x.RowSelectionModel());aU.registerPlugin(new x.AutoTooltips());aU.setSortColumn("name",true);aU.onSort.subscribe(function(bd,bc){A("process-group-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},ax)});aU.onClick.subscribe(function(bf,bc){var be=e(bf.target);var bd=ax.getItem(bc.row);if(aU.getColumns()[bc.cell].id==="actions"){if(be.hasClass("go-to")){if(i.isDefinedAndNotNull(parent.nf)&&i.isDefinedAndNotNull(parent.nf.ProcessGroup)&&i.isDefinedAndNotNull(parent.nf.Shell)){parent.nf.ProcessGroup.enterGroup(bd.id);parent.$("#shell-close-button").click()}}else{if(be.hasClass("show-process-group-status-history")){c.showProcessGroupChart(bd.groupId,bd.id)}else{if(be.hasClass("show-cluster-process-group-summary")){o(bd.id);e("#summary-loading-container").hide();e("#cluster-process-group-summary-dialog").modal("show");aa.resizeCanvas()}}}}});ax.onRowCountChanged.subscribe(function(bd,bc){aU.updateRowCount();aU.render();if(e("#process-group-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(bc.current))}});ax.onRowsChanged.subscribe(function(bd,bc){aU.invalidateRows(bc.rows);aU.render()});e("#process-group-summary-table").data("gridInstance",aU).on("mouseenter","div.slick-cell",function(bh){var be=e(this).find("div.has-bulletins");if(be.length&&!be.data("qtip")){var bc=e(this).find("span.row-id").text();var bd=ax.getItemById(bc);var bg=i.getFormattedBulletins(bd.bulletins);var bf=i.formatUnorderedList(bg);if(i.isDefinedAndNotNull(bf)){be.qtip(e.extend({},i.config.tooltipConfig,{content:bf,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-process-group-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Process Group Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-process-group-id").text("");e("#cluster-process-group-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-process-group-refresh-button").click(function(){o(e("#cluster-process-group-id").text())});var ao=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},ag,ay,aF,a7,ad,aK];var aE={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var a1=new x.Data.DataView({inlineFilters:false});a1.setItems([]);A("cluster-processor-summary-table",{columnId:"node",sortAsc:true},a1);var aa=new x.Grid("#cluster-process-group-summary-table",a1,ao,aE);aa.setSelectionModel(new x.RowSelectionModel());aa.registerPlugin(new x.AutoTooltips());aa.setSortColumn("node",true);aa.onSort.subscribe(function(bd,bc){A("cluster-process-group-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},a1)});a1.onRowCountChanged.subscribe(function(bd,bc){aa.updateRowCount();aa.render()});a1.onRowsChanged.subscribe(function(bd,bc){aa.invalidateRows(bc.rows);aa.render()});e("#cluster-process-group-summary-table").data("gridInstance",aa);var ba=[aN,a5,aW,a7];if(av||aZ){var ar=function(bh,bd,bg,bf,bc){var be="";if(aZ){be+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Input Port"></div>'}if(av){be+='<div class="pointer show-cluster-input-port-summary fa fa-cubes" title="View Input Port Details"></div>'}return be};ba.push({id:"actions",name:"&nbsp;",formatter:ar,resizable:false,sortable:false,width:75,maxWidth:75})}var am={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var M=new x.Data.DataView({inlineFilters:false});M.setItems([]);M.setFilterArgs({searchString:"",property:"name"});M.setFilter(l);A("input-port-summary-table",{columnId:"name",sortAsc:true},M);var al=new x.Grid("#input-port-summary-table",M,ba,am);al.setSelectionModel(new x.RowSelectionModel());al.registerPlugin(new x.AutoTooltips());al.setSortColumn("name",true);al.onSort.subscribe(function(bd,bc){A("input-port-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},M)});al.onClick.subscribe(function(bf,bc){var be=e(bf.target);var bd=M.getItem(bc.row);if(al.getColumns()[bc.cell].id==="actions"){if(be.hasClass("go-to")){F(bd.groupId,bd.id)}else{if(be.hasClass("show-cluster-input-port-summary")){v(bd.groupId,bd.id);e("#summary-loading-container").hide();e("#cluster-input-port-summary-dialog").modal("show");aA.resizeCanvas()}}}});M.onRowCountChanged.subscribe(function(bd,bc){al.updateRowCount();al.render();if(e("#input-port-summary-table").is(":visible")){e("#display-items").text(i.formatInteger(bc.current))}});M.onRowsChanged.subscribe(function(bd,bc){al.invalidateRows(bc.rows);al.render()});e("#input-port-summary-table").data("gridInstance",al).on("mouseenter","div.slick-cell",function(bh){var be=e(this).find("div.has-bulletins");if(be.length&&!be.data("qtip")){var bc=e(this).find("span.row-id").text();var bd=M.getItemById(bc);var bg=i.getFormattedBulletins(bd.bulletins);var bf=i.formatUnorderedList(bg);if(i.isDefinedAndNotNull(bf)){be.qtip(e.extend({},i.config.tooltipConfig,{content:bf,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-input-port-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Input Port Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-input-port-id").text("");e("#cluster-input-port-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-input-port-refresh-button").click(function(){v(e("#cluster-input-port-group-id").text(),e("#cluster-input-port-id").text())});var ah=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aW,a7];var aT={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var Y=new x.Data.DataView({inlineFilters:false});Y.setItems([]);A("cluster-input-port-summary-table",{columnId:"node",sortAsc:true},Y);var aA=new x.Grid("#cluster-input-port-summary-table",Y,ah,aT);aA.setSelectionModel(new x.RowSelectionModel());aA.registerPlugin(new x.AutoTooltips());aA.setSortColumn("node",true);aA.onSort.subscribe(function(bd,bc){A("cluster-input-port-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},Y)});Y.onRowCountChanged.subscribe(function(bd,bc){aA.updateRowCount();aA.render()});Y.onRowsChanged.subscribe(function(bd,bc){aA.invalidateRows(bc.rows);aA.render()});e("#cluster-input-port-summary-table").data("gridInstance",aA);var aC=[aN,a5,aW,ay];if(av||aZ){var aO=function(bh,bd,bg,bf,bc){var be="";if(aZ){be+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Output Port"></div>'}if(av){be+='<div class="pointer show-cluster-output-port-summary fa fa-cubes" title="View Output Port Details"></div>'}return be};aC.push({id:"actions",name:"&nbsp;",formatter:aO,resizable:false,sortable:false,width:75,maxWidth:75})}var at={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var I=new x.Data.DataView({inlineFilters:false});I.setItems([]);I.setFilterArgs({searchString:"",property:"name"});I.setFilter(l);A("output-port-summary-table",{columnId:"name",sortAsc:true},I);var ak=new x.Grid("#output-port-summary-table",I,aC,at);ak.setSelectionModel(new x.RowSelectionModel());ak.registerPlugin(new x.AutoTooltips());ak.setSortColumn("name",true);ak.onSort.subscribe(function(bd,bc){A("output-port-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},I)});ak.onClick.subscribe(function(bf,bc){var be=e(bf.target);var bd=I.getItem(bc.row);if(ak.getColumns()[bc.cell].id==="actions"){if(be.hasClass("go-to")){F(bd.groupId,bd.id)}else{if(be.hasClass("show-cluster-output-port-summary")){k(bd.groupId,bd.id);e("#summary-loading-container").hide();e("#cluster-output-port-summary-dialog").modal("show");a9.resizeCanvas()}}}});I.onRowCountChanged.subscribe(function(bd,bc){ak.updateRowCount();ak.render();if(e("#output-port-summary-table").is(":visible")){e("#display-items").text(i.formatInteger(bc.current))}});I.onRowsChanged.subscribe(function(bd,bc){ak.invalidateRows(bc.rows);ak.render()});e("#output-port-summary-table").data("gridInstance",ak).on("mouseenter","div.slick-cell",function(bh){var be=e(this).find("div.has-bulletins");if(be.length&&!be.data("qtip")){var bc=e(this).find("span.row-id").text();var bd=I.getItemById(bc);var bg=i.getFormattedBulletins(bd.bulletins);var bf=i.formatUnorderedList(bg);if(i.isDefinedAndNotNull(bf)){be.qtip(e.extend({},i.config.tooltipConfig,{content:bf,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-output-port-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Output Port Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-output-port-id").text("");e("#cluster-output-port-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-output-port-refresh-button").click(function(){k(e("#cluster-output-port-group-id").text(),e("#cluster-output-port-id").text())});var X=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aW,ay];var ap={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var aL=new x.Data.DataView({inlineFilters:false});aL.setItems([]);A("cluster-output-port-summary-table",{columnId:"node",sortAsc:true},aL);var a9=new x.Grid("#cluster-output-port-summary-table",aL,X,ap);a9.setSelectionModel(new x.RowSelectionModel());a9.registerPlugin(new x.AutoTooltips());a9.setSortColumn("node",true);a9.onSort.subscribe(function(bd,bc){A("cluster-output-port-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},aL)});aL.onRowCountChanged.subscribe(function(bd,bc){a9.updateRowCount();a9.render()});aL.onRowsChanged.subscribe(function(bd,bc){a9.invalidateRows(bc.rows);a9.render()});e("#cluster-output-port-summary-table").data("gridInstance",a9);var ab=function(bk,bi,bh,bf,bc){var bg="";if(i.isDefinedAndNotNull(bc.activeThreadCount)&&bc.activeThreadCount>0){bg="("+i.escapeHtml(bc.activeThreadCount)+")"}var bj="invalid fa fa-warning";var bd="Invalid";if(bh==="Transmitting"){bj="transmitting fa fa-bullseye";bd=bh}else{bj="not-transmitting icon icon-transmit-false";bd="Not Transmitting"}var be='<div layout="row"><div class="'+bj+'"></div>';return be+'<div class="status-text">'+bd+'</div><div style="float: left; margin-left: 4px;">'+i.escapeHtml(bg)+"</div></div>"};var af={id:"transmissionStatus",field:"transmissionStatus",name:"Transmitting",formatter:ab,sortable:true,resizable:true};var aV={id:"targetUri",field:"targetUri",name:"Target URI",sortable:true,resizable:true,formatter:i.genericValueFormatter};var aq=[{id:"moreDetails",field:"moreDetails",name:"&nbsp;",resizable:false,formatter:U,sortable:true,width:50,maxWidth:50,toolTip:"Sorts based on presence of bulletins"},a5,aV,af,ad,aK];if(av||aZ||i.SUPPORTS_SVG){var T=function(bh,bd,bg,bf,bc){var be="";if(aZ){be+='<div class="pointer go-to fa fa-long-arrow-right" title="Go To Process Group"></div>'}if(i.SUPPORTS_SVG){be+='<div class="pointer show-remote-process-group-status-history fa fa-area-chart" title="View Status History"></div>'}if(av){be+='<div class="pointer show-cluster-remote-process-group-summary fa fa-cubes" title="View Remote Process Group Details"></div>'}return be};aq.push({id:"actions",name:"&nbsp;",formatter:T,resizable:false,sortable:false,width:75,maxWidth:75})}var aR={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,autoEdit:false,multiSelect:false,rowHeight:24};var a0=new x.Data.DataView({inlineFilters:false});a0.setItems([]);a0.setFilterArgs({searchString:"",property:"name"});a0.setFilter(l);A("remote-process-group-summary-table",{columnId:"name",sortAsc:true},a0);var Z=new x.Grid("#remote-process-group-summary-table",a0,aq,aR);Z.setSelectionModel(new x.RowSelectionModel());Z.registerPlugin(new x.AutoTooltips());Z.setSortColumn("name",true);Z.onSort.subscribe(function(bd,bc){A("remote-process-group-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},a0)});Z.onClick.subscribe(function(bf,bc){var be=e(bf.target);var bd=a0.getItem(bc.row);if(Z.getColumns()[bc.cell].id==="actions"){if(be.hasClass("go-to")){F(bd.groupId,bd.id)}else{if(be.hasClass("show-remote-process-group-status-history")){c.showRemoteProcessGroupChart(bd.groupId,bd.id)}else{if(be.hasClass("show-cluster-remote-process-group-summary")){f(bd.groupId,bd.id);e("#summary-loading-container").hide();e("#cluster-remote-process-group-summary-dialog").modal("show");au.resizeCanvas()}}}}});a0.onRowCountChanged.subscribe(function(bd,bc){Z.updateRowCount();Z.render();if(e("#remote-process-group-summary-table").is(":visible")){e("#displayed-items").text(i.formatInteger(bc.current))}});a0.onRowsChanged.subscribe(function(bd,bc){Z.invalidateRows(bc.rows);Z.render()});e("#remote-process-group-summary-table").data("gridInstance",Z).on("mouseenter","div.slick-cell",function(bh){var be=e(this).find("div.has-bulletins");if(be.length&&!be.data("qtip")){var bc=e(this).find("span.row-id").text();var bd=a0.getItemById(bc);var bg=i.getFormattedBulletins(bd.bulletins);var bf=i.formatUnorderedList(bg);if(i.isDefinedAndNotNull(bf)){be.qtip(e.extend({},i.config.tooltipConfig,{content:bf,position:{container:e("#summary"),at:"bottom right",my:"top left",adjust:{x:4,y:4}}}))}}});e("#cluster-remote-process-group-summary-dialog").modal({scrollableContentStyle:"scrollable",headerText:"Cluster Remote Process Group Summary",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){e("#cluster-remote-process-group-id").text("");e("#cluster-remote-process-group-name").text("");this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()}}});e("#cluster-remote-process-group-refresh-button").click(function(){f(e("#cluster-remote-process-group-group-id").text(),e("#cluster-remote-process-group-id").text())});var aQ=[{id:"node",field:"node",name:"Node",sortable:true,resizable:true,formatter:i.genericValueFormatter},aV,af,ad,aK];var N={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:false,enableColumnReorder:false,autoEdit:false,rowHeight:24};var Q=new x.Data.DataView({inlineFilters:false});Q.setItems([]);A("cluster-remote-process-group-summary-table",{columnId:"node",sortAsc:true},Q);var au=new x.Grid("#cluster-remote-process-group-summary-table",Q,aQ,N);au.setSelectionModel(new x.RowSelectionModel());au.registerPlugin(new x.AutoTooltips());au.setSortColumn("node",true);au.onSort.subscribe(function(bd,bc){A("cluster-remote-process-group-summary-table",{columnId:bc.sortCol.field,sortAsc:bc.sortAsc},Q)});Q.onRowCountChanged.subscribe(function(bd,bc){au.updateRowCount();au.render()});Q.onRowsChanged.subscribe(function(bd,bc){au.invalidateRows(bc.rows);au.render()});e("#cluster-remote-process-group-summary-table").data("gridInstance",au);e("#system-diagnostics-link").click(function(){t().done(function(){e("#summary-loading-container").hide();e("#system-diagnostics-dialog").modal("show")})});e("#system-diagnostics-tabs").tabbs({tabStyle:"tab",selectedTabStyle:"selected-tab",scrollableTabContentStyle:"scrollable",tabs:[{name:"JVM",tabContentId:"jvm-tab-content"},{name:"System",tabContentId:"system-tab-content"},{name:"Version",tabContentId:"version-tab-content"}]});e("#system-diagnostics-dialog").modal({scrollableContentStyle:"scrollable",headerText:"System Diagnostics",buttons:[{buttonText:"Close",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){this.modal("hide")}}}],handler:{close:function(){e("#summary-loading-container").show()},open:function(){i.toggleScrollable(e("#"+this.find(".tab-container").attr("id")+"-content").get(0))}}});e("#system-diagnostics-refresh-button").click(function(){t()});e("#total-items").text("0")};var a={};var B=function(I){var H=Math.max(E.get(I,"percentUseBytes",0),E.get(I,"percentUseCount",0));if(H>=100){return 0}var J=E.get(I,"predictions.predictedMillisUntilBytesBackpressure",-1);var K=E.get(I,"predictions.predictedMillisUntilCountBackpressure",-1);if(J<0){return K<0?Number.MAX_VALUE:K}else{if(K<0){return J}}return Math.min(J,K)};var A=function(J,H,K){if(i.isUndefined(a[J])){a[J]={}}var I=function(ak,aj){if(H.columnId==="moreDetails"){var af=0;if(!i.isEmpty(ak.bulletins)){af=ak.bulletins.length}var O=0;if(!i.isEmpty(aj.bulletins)){O=aj.bulletins.length}return af-O}else{if(H.columnId==="runStatus"||H.columnId==="transmissionStatus"){var Z=i.isDefinedAndNotNull(ak[H.columnId])?ak[H.columnId]:"";var X=i.isDefinedAndNotNull(aj[H.columnId])?aj[H.columnId]:"";if(Z===X){return ak.activeThreadCount-aj.activeThreadCount}else{return Z===X?0:Z>X?1:-1}}else{if(H.columnId==="queued"){var am=a[J].count%4;if(am<2){e("#"+J+" span.queued-title").addClass("sorted");var an=i.parseCount(ak.queuedCount);var M=i.parseCount(aj.queuedCount);return an-M}else{e("#"+J+" span.queued-size-title").addClass("sorted");var L=i.parseSize(ak.queuedSize);var T=i.parseSize(aj.queuedSize);return L-T}}else{if(H.columnId==="backpressure"){var am=a[J].count%4;if(am<2){e("#"+J+" span.backpressure-object-title").addClass("sorted");var S=i.isDefinedAndNotNull(ak.percentUseCount)?ak.percentUseCount:-1;var U=i.isDefinedAndNotNull(aj.percentUseCount)?aj.percentUseCount:-1;return S-U}else{e("#"+J+" span.backpressure-data-size-title").addClass("sorted");var ad=i.isDefinedAndNotNull(ak.percentUseBytes)?ak.percentUseBytes:-1;var al=i.isDefinedAndNotNull(aj.percentUseBytes)?aj.percentUseBytes:-1;return ad-al}}else{if(H.columnId==="backpressurePrediction"){var P=B(ak);var ae=B(aj);return P-ae}else{if(H.columnId==="sent"||H.columnId==="received"||H.columnId==="input"||H.columnId==="output"||H.columnId==="transferred"){var ac=ak[H.columnId].split(/\(([^)]+)\)/);var ah=aj[H.columnId].split(/\(([^)]+)\)/);var am=a[J].count%4;if(am<2){e("#"+J+" span."+H.columnId+"-title").addClass("sorted");var R=i.parseCount(ac[0]);var V=i.parseCount(ah[0]);return R-V}else{e("#"+J+" span."+H.columnId+"-size-title").addClass("sorted");var Y=i.parseSize(ac[1]);var Q=i.parseSize(ah[1]);return Y-Q}}else{if(H.columnId==="io"){var am=a[J].count%4;if(am<2){e("#"+J+" span.read-title").addClass("sorted");var ap=i.parseSize(ak.read);var ai=i.parseSize(aj.read);return ap-ai}else{e("#"+J+" span.written-title").addClass("sorted");var W=i.parseSize(ak.written);var ao=i.parseSize(aj.written);return W-ao}}else{if(H.columnId==="tasks"){var am=a[J].count%4;if(am<2){e("#"+J+" span.tasks-title").addClass("sorted");var ab=i.parseCount(ak.tasks);var ag=i.parseCount(aj.tasks);return ab-ag}else{e("#"+J+" span.time-title").addClass("sorted");var N=i.parseDuration(ak.tasksDuration);var aa=i.parseDuration(aj.tasksDuration);return N-aa}}else{var Z=i.isDefinedAndNotNull(ak[H.columnId])?ak[H.columnId]:"";var X=i.isDefinedAndNotNull(aj[H.columnId])?aj[H.columnId]:"";return Z===X?0:Z>X?1:-1}}}}}}}}};e("#"+J+" span.queued-title").removeClass("sorted");e("#"+J+" span.queued-size-title").removeClass("sorted");e("#"+J+" span.backpressure-object-title").removeClass("sorted");e("#"+J+" span.backpressure-data-size-title").removeClass("sorted");e("#"+J+" span.backpressure-prediction-object-title").removeClass("sorted");e("#"+J+" span.backpressure-prediction-data-size-title").removeClass("sorted");e("#"+J+" span.backpressure-prediction-time-title").removeClass("sorted");e("#"+J+" span.input-title").removeClass("sorted");e("#"+J+" span.input-size-title").removeClass("sorted");e("#"+J+" span.output-title").removeClass("sorted");e("#"+J+" span.output-size-title").removeClass("sorted");e("#"+J+" span.read-title").removeClass("sorted");e("#"+J+" span.written-title").removeClass("sorted");e("#"+J+" span.time-title").removeClass("sorted");e("#"+J+" span.tasks-title").removeClass("sorted");e("#"+J+" span.sent-title").removeClass("sorted");e("#"+J+" span.sent-size-title").removeClass("sorted");e("#"+J+" span.received-title").removeClass("sorted");e("#"+J+" span.received-size-title").removeClass("sorted");e("#"+J+" span.transferred-title").removeClass("sorted");e("#"+J+" span.transferred-size-title").removeClass("sorted");if(a[J].prevColumn!==H.columnId){a[J].count=0}else{a[J].count++}K.sort(I,H.sortAsc);a[J].prevColumn=H.columnId};var l=function(I,H){if(H.searchString===""){return true}try{var K=new RegExp(H.searchString,"i")}catch(J){return false}return I[H.property].search(K)>=0};var t=function(){var I=C.urls.systemDiagnostics;var H={};if(!i.isNull(g)){H.clusterNodeId=g}if(!e.isEmptyObject(H)){I+="?"+e.param(H)}return e.ajax({type:"GET",url:I,dataType:"json"}).done(function(N){var S=N.systemDiagnostics;var L=S.aggregateSnapshot;e("#max-heap").text(L.maxHeap);e("#total-heap").text(L.totalHeap);e("#used-heap").text(L.usedHeap);e("#free-heap").text(L.freeHeap);if(i.isDefinedAndNotNull(L.heapUtilization)){e("#utilization-heap").text("("+L.heapUtilization+")")}else{e("#utilization-heap").text("")}e("#max-non-heap").text(L.maxNonHeap);e("#total-non-heap").text(L.totalNonHeap);e("#used-non-heap").text(L.usedNonHeap);e("#free-non-heap").text(L.freeNonHeap);if(i.isDefinedAndNotNull(L.nonHeapUtilization)){e("#utilization-non-heap").text("("+L.nonHeapUtilization+")")}else{e("#utilization-non-heap").text("")}var R=e("#garbage-collection-table tbody").empty();if(i.isDefinedAndNotNull(L.garbageCollection)){var M=L.garbageCollection.sort(function(X,W){return X.name===W.name?0:X.name>W.name?1:-1});e.each(M,function(X,W){s(R,W)})}e("#uptime").text(L.uptime);e("#available-processors").text(L.availableProcessors);if(i.isDefinedAndNotNull(L.processorLoadAverage)){e("#processor-load-average").text(i.formatFloat(L.processorLoadAverage))}else{e("#processor-load-average").html(i.formatValue(L.processorLoadAverage))}var T=e("#flow-file-repository-storage-usage-container").empty();d(T,L.flowFileRepositoryStorageUsage);var P=e("#content-repository-storage-usage-container").empty();if(i.isDefinedAndNotNull(L.contentRepositoryStorageUsage)){var Q=L.contentRepositoryStorageUsage.sort(function(X,W){return X.identifier===W.identifier?0:X.identifier>W.identifier?1:-1});e.each(Q,function(W,X){d(P,X)})}var V=e("#provenance-repository-storage-usage-container").empty();if(i.isDefinedAndNotNull(L.provenanceRepositoryStorageUsage)){var K=L.provenanceRepositoryStorageUsage.sort(function(X,W){return X.identifier===W.identifier?0:X.identifier>W.identifier?1:-1});e.each(K,function(X,W){d(V,W)})}var O={"#version-nifi":L.versionInfo.niFiVersion,"#version-build-tag":L.versionInfo.buildTag,"#version-build-timestamp":L.versionInfo.buildTimestamp,"#version-build-branch":L.versionInfo.buildBranch,"#version-build-revision":L.versionInfo.buildRevision,"#version-java-version":L.versionInfo.javaVersion,"#version-java-vendor":L.versionInfo.javaVendor,"#version-os-name":L.versionInfo.osName,"#version-os-version":L.versionInfo.osVersion,"#version-os-arch":L.versionInfo.osArchitecture};for(var J in O){var U=O[J];if(U){e(J).text(U)}else{e(J).text("(not available)").addClass("unset")}}e("#system-diagnostics-last-refreshed").text(L.statsLastRefreshed)}).fail(h.handleAjaxError)};var s=function(I,H){var K=e("<tr></tr>").appendTo(I);e('<td class="setting-name"></td>').text(H.name+":").appendTo(K);var J=e("<tr></tr>").appendTo(I);e("<td></td>").append(e("<b></b>").text(H.collectionCount+" times ("+H.collectionTime+")")).appendTo(J);e("<tr></tr>").text(" ").appendTo(I)};var d=function(I,L){var K=parseInt(L.totalSpaceBytes,10);var J=parseInt(L.usedSpaceBytes,10);var N=e('<div class="storage-usage"></div>').appendTo(I);var M=e('<div class="storage-identifier setting-name"></div>');M.text("Usage:");if(i.isDefinedAndNotNull(L.identifier)){M.text("Usage for "+L.identifier+":")}M.appendTo(N);(G.injector.get("$compile")(e('<md-progress-linear class="md-hue-2" md-mode="determinate" value="'+(J/K)*100+'" aria-label="FlowFile Repository Storage Usage"></md-progress-linear>'))(G.rootScope)).appendTo(N);var H=e('<div class="storage-usage-details"></div>').text(" ("+L.usedSpace+" of "+L.totalSpace+")").prepend(e("<b></b>").text(Math.round((J/K)*100)+"%"));e('<div class="storage-usage-header"></div>').append(H).append('<div class="clear"></div>').appendTo(N)};var z=function(){return e("#summary-filter").val()};var w=function(O,N,I,M,L,K,J,H){e.each(J.processorStatusSnapshots,function(Q,P){var R=P.processorStatusSnapshot;R.parentProcessGroupName=J.name;R.processGroupNamePath=H.reduce(function(S,T){return S+"/"+T.name},"");O.push(R)});e.each(J.connectionStatusSnapshots,function(P,Q){N.push(Q.connectionStatusSnapshot)});e.each(J.inputPortStatusSnapshots,function(P,Q){M.push(Q.portStatusSnapshot)});e.each(J.outputPortStatusSnapshots,function(P,Q){L.push(Q.portStatusSnapshot)});e.each(J.remoteProcessGroupStatusSnapshots,function(P,Q){K.push(Q.remoteProcessGroupStatusSnapshot)});I.push(J);e.each(J.processGroupStatusSnapshots,function(P,Q){var R=Q.processGroupStatusSnapshot;w(O,N,I,M,L,K,R,j(H,R))})};var j=function(H,J){var I=H.slice();I.push(J);return I};var D=function(){var H;if(e("#processor-summary-table").is(":visible")){H=e("#processor-summary-table").data("gridInstance")}else{if(e("#connection-summary-table").is(":visible")){H=e("#connection-summary-table").data("gridInstance")}else{if(e("#input-port-summary-table").is(":visible")){H=e("#input-port-summary-table").data("gridInstance")}else{if(e("#output-port-summary-table").is(":visible")){H=e("#output-port-summary-table").data("gridInstance")}else{if(e("#process-group-summary-table").is(":visible")){H=e("#process-group-summary-table").data("gridInstance")}else{if(e("#remote-process-group-summary-table").is(":visible")){H=e("#remote-process-group-summary-table").data("gridInstance")}}}}}}if(i.isDefinedAndNotNull(H)){var I=H.getData();I.setFilterArgs({searchString:z(),property:e("#summary-filter-type").combo("getSelectedOption").value});I.refresh()}};var m=function(H,I){e.ajax({type:"GET",url:C.urls.api+"/flow/processors/"+encodeURIComponent(I)+"/status",data:{nodewise:true},dataType:"json"}).done(function(J){if(i.isDefinedAndNotNull(J.processorStatus)){var N=J.processorStatus;var L=e("#cluster-processor-summary-table").data("gridInstance");var M=L.getData();var K=[];e.each(N.nodeSnapshots,function(Q,O){var P=O.statusSnapshot;K.push({id:O.nodeId,node:O.address+":"+O.apiPort,runStatus:P.runStatus,activeThreadCount:P.activeThreadCount,terminatedThreadCount:P.terminatedThreadCount,input:P.input,read:P.read,written:P.written,output:P.output,tasks:P.tasks,tasksDuration:P.tasksDuration})});M.setItems(K);M.reSort();L.invalidate();e("#cluster-processor-name").text(N.name).ellipsis();e("#cluster-processor-type").text(N.aggregateSnapshot.type).ellipsis();e("#cluster-processor-id").text(N.id);e("#cluster-processor-group-id").text(N.groupId);e("#cluster-processor-summary-last-refreshed").text(N.statsLastRefreshed)}}).fail(h.handleAjaxError)};var b=function(H,I){e.ajax({type:"GET",url:C.urls.api+"/flow/connections/"+encodeURIComponent(I)+"/status",data:{nodewise:true},dataType:"json"}).done(function(O){if(i.isDefinedAndNotNull(O.connectionStatus)){var N=O.connectionStatus;var Q=e("#cluster-connection-summary-table").data("gridInstance");var M=Q.getData();var S=[];e.each(N.nodeSnapshots,function(V,T){var U=T.statusSnapshot;S.push({id:T.nodeId,node:T.address+":"+T.apiPort,input:U.input,queued:U.queued,queuedCount:U.queuedCount,queuedSize:U.queuedSize,percentUseCount:U.percentUseCount,percentUseBytes:U.percentUseBytes,predictions:U.predictions,output:U.output})});var R=E.some(S,function(T){return E.isNil(T.predictions)});var L=Q.getColumns();if(R){var K=L.filter(function(T){return T.id!==r.id});Q.setColumns(K)}else{var P=L.findIndex(function(T){return T.id===r.id});if(P<0){var J=L.findIndex(function(T){return T.id==="backpressure"});if(J<0){L.push(r)}else{L.splice(J+1,0,r)}Q.setColumns(L)}}M.setItems(S);M.reSort();Q.invalidate();e("#cluster-connection-name").text(N.name).ellipsis();e("#cluster-connection-type").text("Connection").ellipsis();e("#cluster-connection-id").text(N.id);e("#cluster-connection-group-id").text(N.groupId);e("#cluster-connection-summary-last-refreshed").text(N.statsLastRefreshed)}}).fail(h.handleAjaxError)};var o=function(H){e.ajax({type:"GET",url:C.urls.api+"/flow/process-groups/"+encodeURIComponent(H)+"/status",data:{nodewise:true,recursive:false},dataType:"json"}).done(function(K){if(i.isDefinedAndNotNull(K.processGroupStatus)){var M=K.processGroupStatus;var I=e("#cluster-process-group-summary-table").data("gridInstance");var L=I.getData();var J=[];e.each(M.nodeSnapshots,function(P,N){var O=N.statusSnapshot;J.push({id:N.nodeId,node:N.address+":"+N.apiPort,activeThreadCount:O.activeThreadCount,transferred:O.transferred,input:O.input,queued:O.queued,queuedCount:O.queuedCount,queuedSize:O.queuedSize,output:O.output,read:O.read,written:O.written,sent:O.sent,received:O.received})});L.setItems(J);L.reSort();I.invalidate();e("#cluster-process-group-name").text(M.name).ellipsis();e("#cluster-process-group-type").text("Process Group").ellipsis();e("#cluster-process-group-id").text(M.id);e("#cluster-process-group-summary-last-refreshed").text(M.statsLastRefreshed)}}).fail(h.handleAjaxError)};var v=function(H,I){e.ajax({type:"GET",url:C.urls.api+"/flow/input-ports/"+encodeURIComponent(I)+"/status",data:{nodewise:true},dataType:"json"}).done(function(K){if(i.isDefinedAndNotNull(K.portStatus)){var L=K.portStatus;var J=e("#cluster-input-port-summary-table").data("gridInstance");var M=J.getData();var N=[];e.each(L.nodeSnapshots,function(Q,O){var P=O.statusSnapshot;N.push({id:O.nodeId,node:O.address+":"+O.apiPort,runStatus:P.runStatus,activeThreadCount:P.activeThreadCount,output:P.output})});M.setItems(N);M.reSort();J.invalidate();e("#cluster-input-port-name").text(L.name).ellipsis();e("#cluster-input-port-type").text("Input Port").ellipsis();e("#cluster-input-port-id").text(L.id);e("#cluster-input-port-group-id").text(L.groupId);e("#cluster-input-port-summary-last-refreshed").text(L.statsLastRefreshed)}}).fail(h.handleAjaxError)};var k=function(H,I){e.ajax({type:"GET",url:C.urls.api+"/flow/output-ports/"+encodeURIComponent(I)+"/status",data:{nodewise:true},dataType:"json"}).done(function(K){if(i.isDefinedAndNotNull(K.portStatus)){var J=K.portStatus;var L=e("#cluster-output-port-summary-table").data("gridInstance");var N=L.getData();var M=[];e.each(J.nodeSnapshots,function(Q,O){var P=O.statusSnapshot;M.push({id:O.nodeId,node:O.address+":"+O.apiPort,runStatus:P.runStatus,activeThreadCount:P.activeThreadCount,input:P.input})});N.setItems(M);N.reSort();L.invalidate();e("#cluster-output-port-name").text(J.name).ellipsis();e("#cluster-output-port-type").text("Output Port").ellipsis();e("#cluster-output-port-id").text(J.id);e("#cluster-output-port-group-id").text(J.groupId);e("#cluster-output-port-summary-last-refreshed").text(J.statsLastRefreshed)}}).fail(h.handleAjaxError)};var f=function(I,H){e.ajax({type:"GET",url:C.urls.api+"/flow/remote-process-groups/"+encodeURIComponent(H)+"/status",data:{nodewise:true},dataType:"json"}).done(function(K){if(i.isDefinedAndNotNull(K.remoteProcessGroupStatus)){var N=K.remoteProcessGroupStatus;var L=e("#cluster-remote-process-group-summary-table").data("gridInstance");var M=L.getData();var J=[];e.each(N.nodeSnapshots,function(Q,O){var P=O.statusSnapshot;J.push({id:O.nodeId,node:O.address+":"+O.apiPort,targetUri:P.targetUri,transmissionStatus:P.transmissionStatus,sent:P.sent,received:P.received,activeThreadCount:P.activeThreadCount})});M.setItems(J);M.reSort();L.invalidate();e("#cluster-remote-process-group-name").text(N.name).ellipsis();e("#cluster-remote-process-group-type").text("Remote Process Group").ellipsis();e("#cluster-remote-process-group-id").text(N.id);e("#cluster-remote-process-group-group-id").text(N.groupId);e("#cluster-remote-process-group-summary-last-refreshed").text(N.statsLastRefreshed)}}).fail(h.handleAjaxError)};var g=null;return{init:function(H){return e.Deferred(function(I){var J=e.ajax({type:"GET",url:C.urls.flowConfig,dataType:"json"}).done(function(L){var K=L.flowConfiguration;c.init(K.timeOffset);q.init({supportsGoTo:false,supportsStatusBar:false});p.init();u(H);I.resolve()}).fail(function(){I.reject()})}).promise()},setClusterNodeId:function(H){g=H},resetTableSize:function(){var M=e("#processor-summary-table");if(M.is(":visible")){var Q=M.data("gridInstance");if(i.isDefinedAndNotNull(Q)){Q.resizeCanvas()}}var P=e("#connection-summary-table");if(P.is(":visible")){var L=P.data("gridInstance");if(i.isDefinedAndNotNull(L)){L.resizeCanvas()}}var H=e("#process-group-summary-table");if(H.is(":visible")){var N=H.data("gridInstance");if(i.isDefinedAndNotNull(N)){N.resizeCanvas()}}var S=e("#input-port-summary-table");if(S.is(":visible")){var R=S.data("gridInstance");if(i.isDefinedAndNotNull(R)){R.resizeCanvas()}}var J=e("#output-port-summary-table");if(J.is(":visible")){var O=J.data("gridInstance");if(i.isDefinedAndNotNull(O)){O.resizeCanvas()}}var K=e("#remote-process-group-summary-table");if(K.is(":visible")){var I=K.data("gridInstance");if(i.isDefinedAndNotNull(I)){I.resizeCanvas()}}},loadSummaryTable:function(){var H=C.urls.status;var I={};if(!i.isNull(g)){I.clusterNodeId=g}if(!e.isEmptyObject(I)){H+="?"+e.param(I)}return e.ajax({type:"GET",url:H,data:{recursive:true},dataType:"json"}).done(function(J){var ab=J.processGroupStatus;var P=ab.aggregateSnapshot;if(i.isDefinedAndNotNull(P)){var U=e("#processor-summary-table");i.cleanUpTooltips(U,"div.has-bulletins");var S=U.data("gridInstance");var Q=S.getData();var N=e("#connection-summary-table").data("gridInstance");var L=N.getData();var K=e("#process-group-summary-table");i.cleanUpTooltips(K,"div.has-bulletins");var V=K.data("gridInstance");var T=V.getData();var al=e("#input-port-summary-table");i.cleanUpTooltips(al,"div.has-bulletins");var aj=al.data("gridInstance");var ai=aj.getData();var am=e("#output-port-summary-table");i.cleanUpTooltips(am,"div.has-bulletins");var Y=am.data("gridInstance");var W=Y.getData();var aa=e("#remote-process-group-summary-table");i.cleanUpTooltips(aa,"div.has-bulletins");var ae=aa.data("gridInstance");var ad=ae.getData();var ak=[];var ah=[];var R=[];var ac=[];var an=[];var O=[];w(ak,ah,R,ac,an,O,P,[P]);var af=E.some(ah,function(ao){return E.isNil(ao.predictions)});var M=N.getColumns();if(af){var Z=M.filter(function(ao){return ao.id!==r.id});N.setColumns(Z)}else{var ag=M.findIndex(function(ao){return ao.id===r.id});if(ag<0){var X=M.findIndex(function(ao){return ao.id==="backpressure"});if(X<0){M.push(r)}else{M.splice(X+1,0,r)}N.setColumns(M)}}Q.setItems(ak);Q.reSort();S.invalidate();L.setItems(ah);L.reSort();N.invalidate();T.setItems(R);T.reSort();V.invalidate();ai.setItems(ac);ai.reSort();aj.invalidate();W.setItems(an);W.reSort();Y.invalidate();ad.setItems(O);ad.reSort();ae.invalidate();e("#summary-last-refreshed").text(ab.statsLastRefreshed);if(e("#processor-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(ak.length))}else{if(e("#connection-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(ah.length))}else{if(e("#input-port-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(ac.length))}else{if(e("#output-port-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(an.length))}else{if(e("#process-group-summary-table").is(":visible")){e("#total-items").text(i.formatInteger(R.length))}else{e("#total-items").text(i.formatInteger(O.length))}}}}}}else{e("#total-items").text("0")}}).fail(h.handleAjaxError)}}}));