(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.CountersTable","nf.ErrorHandler","nf.Storage"],function(e,f,c,g,d){return(nf.Counters=b(e,f,c,g,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Counters=b(require("jquery"),require("nf.Common"),require("nf.CountersTable"),require("nf.ErrorHandler"),require("nf.Storage")))}else{nf.Counters=b(a.$,a.nf.Common,a.nf.CountersTable,a.nf.ErrorHandler,a.nf.Storage)}}}(this,function(e,d,a,g,f){e(document).ready(function(){i.init()});var b={urls:{banners:"../nifi-api/flow/banners",about:"../nifi-api/flow/about",currentUser:"../nifi-api/flow/current-user"}};var h=function(){return e.ajax({type:"GET",url:b.urls.currentUser,dataType:"json"}).done(function(j){d.setCurrentUser(j)}).fail(g.handleAjaxError)};var c=function(){e("#refresh-button").click(function(){a.loadCountersTable()});return e.Deferred(function(j){if(top===window){e.ajax({type:"GET",url:b.urls.banners,dataType:"json"}).done(function(o){if(d.isDefinedAndNotNull(o.banners)){if(d.isDefinedAndNotNull(o.banners.headerText)&&o.banners.headerText!==""){var l=e("#banner-header").text(o.banners.headerText).show();var n=function(p){var q=e("#"+p);q.css("top",(parseInt(l.css("height"),10)+parseInt(q.css("top"),10))+"px")};n("counters")}if(d.isDefinedAndNotNull(o.banners.footerText)&&o.banners.footerText!==""){var k=e("#banner-footer").text(o.banners.footerText).show();var m=function(p){var q=e("#"+p);q.css("bottom",parseInt(k.css("height"),10)+"px")};m("counters")}}j.resolve()}).fail(function(m,k,l){g.handleAjaxError(m,k,l);j.reject()})}else{j.resolve()}}).promise()};var i={init:function(){f.init();h().done(function(){a.init();a.loadCountersTable().done(function(){c().done(function(){var j=function(){if(top===window){e("body").css({height:e(window).height()+"px",width:e(window).width()+"px"});e("#counters").css("margin",40);e("#counters-table").css("bottom",127);e("#counters-refresh-container").css("margin",40)}a.resetTableSize()};e.ajax({type:"GET",url:b.urls.about,dataType:"json"}).done(function(l){var k=l.about;var m=k.title+" Counters";document.title=m;e("#counters-header-text").text(m);j()}).fail(g.handleAjaxError);e(window).on("resize",function(s){j();var l=e(".dialog");for(var q=0,r=l.length;q<r;q++){if(e(l[q]).is(":visible")){setTimeout(function(k){k.modal("resize")},50,e(l[q]))}}var t=e('*[class*="slickgrid_"]');for(var p=0,r=t.length;p<r;p++){if(e(t[p]).is(":visible")){setTimeout(function(k){k.data("gridInstance").resizeCanvas()},50,e(t[p]))}}var n=e(".tab-container");var m=[];for(var o=0,r=n.length;o<r;o++){if(e(n[o]).is(":visible")){m.push(e("#"+e(n[o]).attr("id")+"-content"))}}e.each(m,function(k,u){d.toggleScrollable(u.get(0))})})})})})}};return i}));