(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Client","nf.Birdseye","nf.Storage","nf.Graph","nf.CanvasUtils","nf.ErrorHandler","nf.Dialog","nf.Common"],function(g,k,c,h,i,e,j,f,d){return(nf.ng.RemoteProcessGroupComponent=b(g,k,c,h,i,e,j,f,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.RemoteProcessGroupComponent=b(require("jquery"),require("nf.Client"),require("nf.Birdseye"),require("nf.Storage"),require("nf.Graph"),require("nf.CanvasUtils"),require("nf.ErrorHandler"),require("nf.Dialog"),require("nf.Common")))}else{nf.ng.RemoteProcessGroupComponent=b(a.$,a.nf.Client,a.nf.Birdseye,a.nf.Storage,a.nf.Graph,a.nf.CanvasUtils,a.nf.ErrorHandler,a.nf.Dialog,a.nf.Common)}}}(this,function(e,i,a,f,g,c,h,d,b){return function(m){var l=function(o){var n={revision:i.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:f.isDisconnectionAcknowledged(),component:{targetUris:e("#new-remote-process-group-uris").val(),position:{x:o.x,y:o.y},communicationsTimeout:e("#new-remote-process-group-timeout").val(),yieldDuration:e("#new-remote-process-group-yield-duration").val(),transportProtocol:e("#new-remote-process-group-transport-protocol-combo").combo("getSelectedOption").value,localNetworkInterface:e("#new-remote-process-group-local-network-interface").val(),proxyHost:e("#new-remote-process-group-proxy-host").val(),proxyPort:e("#new-remote-process-group-proxy-port").val(),proxyUser:e("#new-remote-process-group-proxy-user").val(),proxyPassword:e("#new-remote-process-group-proxy-password").val()}};e.ajax({type:"POST",url:m.headerCtrl.toolboxCtrl.config.urls.api+"/process-groups/"+encodeURIComponent(c.getGroupId())+"/remote-process-groups",data:JSON.stringify(n),dataType:"json",contentType:"application/json"}).done(function(p){g.add({remoteProcessGroups:[p]},{selectAll:true});e("#new-remote-process-group-dialog").modal("hide");g.updateVisibility();a.refresh()}).fail(h.handleConfigurationUpdateAjaxError)};function k(){this.icon="icon icon-group-remote";this.hoverIcon="icon icon-group-remote-add";this.modal={getElement:function(){return e("#new-remote-process-group-dialog")},init:function(){var n="30 sec";var o="10 sec";this.getElement().modal({scrollableContentStyle:"scrollable",headerText:"Add Remote Process Group",handler:{close:function(){e("#new-remote-process-group-uris").val("");e("#new-remote-process-group-timeout").val(n);e("#new-remote-process-group-yield-duration").val(o);e("#new-remote-process-group-transport-protocol-combo").combo("setSelectedOption",{value:"RAW"});e("#new-remote-process-group-local-network-interface").val("");e("#new-remote-process-group-proxy-host").val("");e("#new-remote-process-group-proxy-port").val("");e("#new-remote-process-group-proxy-user").val("");e("#new-remote-process-group-proxy-password").val("")}}});e("#new-remote-process-group-timeout").val(n);e("#new-remote-process-group-yield-duration").val(o);e("#new-remote-process-group-transport-protocol-combo").combo({options:[{text:"RAW",value:"RAW"},{text:"HTTP",value:"HTTP"}]})},update:function(o,n){this.getElement().modal(o,n)},show:function(){this.getElement().modal("show")},hide:function(){this.getElement().modal("hide")}}}k.prototype={constructor:k,getElement:function(){return e("#group-remote-component")},enabled:function(){this.getElement().attr("disabled",false)},disabled:function(){this.getElement().attr("disabled",true)},dropHandler:function(n){this.promptForRemoteProcessGroupUri(n)},dragIcon:function(n){return e('<div class="icon icon-group-remote-add"></div>')},promptForRemoteProcessGroupUri:function(p){var n=this;var o=function(){l(p)};this.modal.update("setButtonModel",[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:o}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){n.modal.hide()}}}]);this.modal.show();e("#new-remote-process-group-uris").focus().off("keyup").on("keyup",function(r){var q=r.keyCode?r.keyCode:r.which;if(q===e.ui.keyCode.ENTER){o()}})}};var j=new k();return j}}));