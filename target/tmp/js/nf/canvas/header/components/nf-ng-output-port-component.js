(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Client","nf.Birdseye","nf.Storage","nf.Graph","nf.CanvasUtils","nf.ErrorHandler","nf.Common"],function(i,e,g,d,c,f,j,h){return(nf.ng.OutputPortComponent=b(i,e,g,d,c,f,j))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.OutputPortComponent=b(require("jquery"),require("nf.Client"),require("nf.Birdseye"),require("nf.Storage"),require("nf.Graph"),require("nf.CanvasUtils"),require("nf.ErrorHandler"),require("nf.Dialog")))}else{nf.ng.OutputPortComponent=b(a.$,a.nf.Client,a.nf.Birdseye,a.nf.Storage,a.nf.Graph,a.nf.CanvasUtils,a.nf.ErrorHandler,a.nf.Dialog)}}}(this,function(g,c,e,b,a,d,h,f){return function(l){var j=function(p,m,o){var n={revision:c.getRevision({revision:{version:0}}),disconnectedNodeAcknowledged:b.isDisconnectionAcknowledged(),component:{name:p,allowRemoteAccess:m,position:{x:o.x,y:o.y}}};g.ajax({type:"POST",url:l.headerCtrl.toolboxCtrl.config.urls.api+"/process-groups/"+encodeURIComponent(d.getGroupId())+"/output-ports",data:JSON.stringify(n),dataType:"json",contentType:"application/json"}).done(function(q){a.add({outputPorts:[q]},{selectAll:true});k.modal.hide();a.updateVisibility();e.refresh()}).fail(h.handleConfigurationUpdateAjaxError)};function i(){this.icon="icon icon-port-out";this.hoverIcon="icon icon-port-out-add";this.modal={getElement:function(){return g("#new-port-dialog")},init:function(){},update:function(n,m){this.getElement().modal(n,m)},show:function(){g("#new-port-dialog > .dialog-header > .dialog-header-text").text("Add Output Port");var n={text:"Local connections",value:"false",description:"Send FlowFiles to components in parent process groups."};var m={text:"Remote connections (site-to-site)",value:"true",description:"Send FlowFiles to remote process group (site-to-site)."};g("#port-allow-remote-access-label").text("Send to");g("#port-allow-remote-access-info").attr("title","Specify where FlowFiles are sent.");if(d.getParentGroupId()===null){g("#port-allow-remote-access-setting").hide()}else{g("#port-allow-remote-access-setting").show()}g("#port-allow-remote-access").combo({options:[n,m]});this.getElement().modal("show")},hide:function(){this.getElement().modal("hide")}}}i.prototype={constructor:i,getElement:function(){return g("#port-out-component")},enabled:function(){this.getElement().attr("disabled",false)},disabled:function(){this.getElement().attr("disabled",true)},dropHandler:function(m){this.promptForOutputPortName(m)},dragIcon:function(m){return g('<div class="icon icon-port-out-add"></div>')},promptForOutputPortName:function(n){var o=this;var m=function(){var q=g("#new-port-name").val();var p=g("#port-allow-remote-access").combo("getSelectedOption").value;j(q,p,n)};this.modal.update("setButtonModel",[{buttonText:"Add",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:m}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){o.modal.hide()}}}]);g("#new-port-type").text("Output");this.modal.show();g("#new-port-name").focus().off("keyup").on("keyup",function(q){var p=q.keyCode?q.keyCode:q.which;if(p===g.ui.keyCode.ENTER){m()}})}};var k=new i();return k}}));