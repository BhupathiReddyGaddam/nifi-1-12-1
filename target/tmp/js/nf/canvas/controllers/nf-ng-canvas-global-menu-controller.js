(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.QueueListing","nf.Shell","nf.ParameterContexts","nf.PolicyManagement","nf.ClusterSummary","nf.StatusHistory","nf.ErrorHandler","nf.Settings","nf.CanvasUtils"],function(g,f,m,c,l,j,i,k,h,e,d){return(nf.ng.Canvas.GlobalMenuCtrl=b(g,f,m,c,j,i,k,h,e,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.Canvas.GlobalMenuCtrl=b(require("jquery"),require("nf.Common"),require("nf.QueueListing"),require("nf.Shell"),require("nf.ParameterContexts"),require("nf.PolicyManagement"),require("nf.ClusterSummary"),require("nf.StatusHistory"),require("nf.ErrorHandler"),require("nf.Settings"),require("nf.CanvasUtils")))}else{nf.ng.Canvas.GlobalMenuCtrl=b(a.$,a.nf.Common,a.nf.QueueListing,a.nf.Shell,a.nf.ParameterContexts,a.nf.PolicyManagement,a.nf.ClusterSummary,a.nf.StatusHistory,a.nf.ErrorHandler,a.nf.Settings,a.nf.CanvasUtils)}}}(this,function(e,d,k,a,j,h,g,i,f,c,b){return function(o){var m={urls:{helpDocument:"../nifi-docs/documentation",controllerAbout:"../nifi-api/flow/about"}};function n(p){this.summary={shell:{launch:function(){a.showPage("summary")}}};this.counters={shell:{launch:function(){if(d.canAccessCounters()){a.showPage("counters")}}}};this.bulletinBoard={shell:{launch:function(){a.showPage("bulletin-board")}}};this.dataProvenance={shell:{launch:function(){if(d.canAccessProvenance()){a.showPage("provenance")}}}};this.controllerSettings={shell:{launch:function(){c.showSettings()}}};this.parameterContexts={shell:{launch:function(){j.showParameterContexts()}}};this.cluster={visible:function(){return g.isConnectedToCluster()},shell:{launch:function(){if(d.canAccessController()){a.showPage("cluster")}}}};this.flowConfigHistory={shell:{launch:function(){a.showPage("history")}}};this.nodeStatusHistory={shell:{launch:function(){i.showNodeChart()}}};this.users={shell:{launch:function(){if(d.canAccessTenants()){a.showPage("users")}}}};this.policies={shell:{launch:function(){if(d.canModifyPolicies()&&d.canAccessTenants()){h.showGlobalPolicies()}}}};this.templates={shell:{launch:function(){a.showPage("templates?"+e.param({groupId:b.getGroupId()}))}}};this.help={shell:{launch:function(){a.showPage(m.urls.helpDocument)}}};this.about={init:function(){e.ajax({type:"GET",url:m.urls.controllerAbout,dataType:"json"}).done(function(s){var q=s.about;document.title=q.title;e("#nf-version").text(q.version);var r=false;if(q.buildTag&&q.buildTag!=="HEAD"){e("#nf-about-build-tag").text(q.buildTag);e("#nf-version-detail-tag").show();r=true}if(q.buildRevision){e("#nf-about-build-revision").text(q.buildRevision);e("#nf-about-build-branch").text(q.buildBranch);e("#nf-version-detail-commit").show();r=true}if(q.buildTimestamp){e("#nf-about-build-timestamp").text(q.buildTimestamp);e("#nf-version-detail-timestamp").show();r=true}if(r){e("#nf-version-detail").show()}if(!d.isBlank(q.contentViewerUrl)){e("#nifi-content-viewer-url").text(q.contentViewerUrl);k.initFlowFileDetailsDialog()}}).fail(f.handleAjaxError);this.modal.init()},modal:{getElement:function(){return e("#nf-about")},init:function(){var q=this;var r=function(){var s=e(this);var t=e("#nf-about-pic-container").height()+e(".dialog-header").height()+10;s.find(".dialog-content").css("top",t)};this.getElement().modal({scrollableContentStyle:"scrollable",headerText:"About Apache NiFi",handler:{resize:r},buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){q.hide()}}}]})},update:function(r,q){this.getElement().modal(r,q)},show:function(){this.getElement().modal("show")},hide:function(){this.getElement().modal("hide")}}}}n.prototype={constructor:n,init:function(){this.about.init()}};var l=new n();return l}}));