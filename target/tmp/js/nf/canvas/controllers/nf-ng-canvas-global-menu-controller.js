(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.QueueListing","nf.Shell","nf.ParameterContexts","nf.PolicyManagement","nf.ClusterSummary","nf.ErrorHandler","nf.Settings","nf.CanvasUtils"],function(g,f,l,c,k,j,i,h,e,d){return(nf.ng.Canvas.GlobalMenuCtrl=b(g,f,l,c,j,i,h,e,d))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.Canvas.GlobalMenuCtrl=b(require("jquery"),require("nf.Common"),require("nf.QueueListing"),require("nf.Shell"),require("nf.ParameterContexts"),require("nf.PolicyManagement"),require("nf.ClusterSummary"),require("nf.ErrorHandler"),require("nf.Settings"),require("nf.CanvasUtils")))}else{nf.ng.Canvas.GlobalMenuCtrl=b(a.$,a.nf.Common,a.nf.QueueListing,a.nf.Shell,a.nf.ParameterContexts,a.nf.PolicyManagement,a.nf.ClusterSummary,a.nf.ErrorHandler,a.nf.Settings,a.nf.CanvasUtils)}}}(this,function(e,d,j,a,i,h,g,f,c,b){return function(n){var l={urls:{helpDocument:"../nifi-docs/documentation",controllerAbout:"../nifi-api/flow/about"}};function m(o){this.summary={shell:{launch:function(){a.showPage("summary")}}};this.counters={shell:{launch:function(){if(d.canAccessCounters()){a.showPage("counters")}}}};this.bulletinBoard={shell:{launch:function(){a.showPage("bulletin-board")}}};this.dataProvenance={shell:{launch:function(){if(d.canAccessProvenance()){a.showPage("provenance")}}}};this.controllerSettings={shell:{launch:function(){c.showSettings()}}};this.parameterContexts={shell:{launch:function(){i.showParameterContexts()}}};this.cluster={visible:function(){return g.isConnectedToCluster()},shell:{launch:function(){if(d.canAccessController()){a.showPage("cluster")}}}};this.flowConfigHistory={shell:{launch:function(){a.showPage("history")}}};this.users={shell:{launch:function(){if(d.canAccessTenants()){a.showPage("users")}}}};this.policies={shell:{launch:function(){if(d.canModifyPolicies()&&d.canAccessTenants()){h.showGlobalPolicies()}}}};this.templates={shell:{launch:function(){a.showPage("templates?"+e.param({groupId:b.getGroupId()}))}}};this.help={shell:{launch:function(){a.showPage(l.urls.helpDocument)}}};this.about={init:function(){e.ajax({type:"GET",url:l.urls.controllerAbout,dataType:"json"}).done(function(r){var p=r.about;document.title=p.title;e("#nf-version").text(p.version);var q=false;if(p.buildTag&&p.buildTag!=="HEAD"){e("#nf-about-build-tag").text(p.buildTag);e("#nf-version-detail-tag").show();q=true}if(p.buildRevision){e("#nf-about-build-revision").text(p.buildRevision);e("#nf-about-build-branch").text(p.buildBranch);e("#nf-version-detail-commit").show();q=true}if(p.buildTimestamp){e("#nf-about-build-timestamp").text(p.buildTimestamp);e("#nf-version-detail-timestamp").show();q=true}if(q){e("#nf-version-detail").show()}if(!d.isBlank(p.contentViewerUrl)){e("#nifi-content-viewer-url").text(p.contentViewerUrl);j.initFlowFileDetailsDialog()}}).fail(f.handleAjaxError);this.modal.init()},modal:{getElement:function(){return e("#nf-about")},init:function(){var p=this;var q=function(){var r=e(this);var s=e("#nf-about-pic-container").height()+e(".dialog-header").height()+10;r.find(".dialog-content").css("top",s)};this.getElement().modal({scrollableContentStyle:"scrollable",headerText:"About Apache NiFi",handler:{resize:q},buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){p.hide()}}}]})},update:function(q,p){this.getElement().modal(q,p)},show:function(){this.getElement().modal("show")},hide:function(){this.getElement().modal("hide")}}}}m.prototype={constructor:m,init:function(){this.about.init()}};var k=new m();return k}}));