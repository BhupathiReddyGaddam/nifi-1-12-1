(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.Storage","nf.CanvasUtils","nf.Client"],function(g,f,d,e,c){return(nf.Snippet=b(g,f,d,e,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.Snippet=b(require("jquery"),require("d3"),require("nf.Storage"),require("nf.CanvasUtils"),require("nf.Client")))}else{nf.Snippet=b(a.$,a.d3,a.nf.Storage,a.nf.CanvasUtils,a.nf.Client)}}}(this,function(f,e,c,d,b){var a={urls:{snippets:"../nifi-api/snippets",processGroups:"../nifi-api/process-groups"}};return{marshal:function(h,g){var i={parentGroupId:g,processors:{},funnels:{},inputPorts:{},outputPorts:{},remoteProcessGroups:{},processGroups:{},connections:{},labels:{}};h.each(function(k){var j=e.select(this);if(d.isProcessor(j)){i.processors[k.id]=b.getRevision(j.datum())}else{if(d.isFunnel(j)){i.funnels[k.id]=b.getRevision(j.datum())}else{if(d.isLabel(j)){i.labels[k.id]=b.getRevision(j.datum())}else{if(d.isInputPort(j)){i.inputPorts[k.id]=b.getRevision(j.datum())}else{if(d.isOutputPort(j)){i.outputPorts[k.id]=b.getRevision(j.datum())}else{if(d.isProcessGroup(j)){i.processGroups[k.id]=b.getRevision(j.datum())}else{if(d.isRemoteProcessGroup(j)){i.remoteProcessGroups[k.id]=b.getRevision(j.datum())}else{if(d.isConnection(j)){i.connections[k.id]=b.getRevision(j.datum())}}}}}}}}});return i},create:function(h){var g={disconnectedNodeAcknowledged:c.isDisconnectionAcknowledged(),snippet:h};return f.ajax({type:"POST",url:a.urls.snippets,data:JSON.stringify(g),dataType:"json",contentType:"application/json"})},copy:function(i,g,j){var h={snippetId:i,originX:g.x,originY:g.y,disconnectedNodeAcknowledged:c.isDisconnectionAcknowledged()};return f.ajax({type:"POST",url:a.urls.processGroups+"/"+encodeURIComponent(j)+"/snippet-instance",data:JSON.stringify(h),dataType:"json",contentType:"application/json"})},remove:function(g){return f.ajax({type:"DELETE",url:a.urls.snippets+"/"+encodeURIComponent(g)+"?"+f.param({disconnectedNodeAcknowledged:c.isDisconnectionAcknowledged()})})},move:function(h,i){var g={disconnectedNodeAcknowledged:c.isDisconnectionAcknowledged(),snippet:{id:h,parentGroupId:i}};return f.ajax({type:"PUT",url:a.urls.snippets+"/"+encodeURIComponent(h),data:JSON.stringify(g),dataType:"json",contentType:"application/json"})}}}));