(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","d3","nf.ErrorHandler","nf.Common","nf.Dialog","nf.Storage","nf.Client","nf.CanvasUtils","nf.ng.Bridge","nf.Port"],function(g,k,j,c,e,h,l,d,i,f){return(nf.PortConfiguration=b(g,k,j,c,e,h,l,d,i,f))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.PortConfiguration=b(require("jquery"),require("d3"),require("nf.ErrorHandler"),require("nf.Common"),require("nf.Dialog"),require("nf.Storage"),require("nf.Client"),require("nf.CanvasUtils"),require("nf.ng.Bridge"),require("nf.Port")))}else{nf.PortConfiguration=b(a.$,a.d3,a.nf.ErrorHandler,a.nf.Common,a.nf.Dialog,a.nf.Storage,a.nf.Client,a.nf.CanvasUtils,a.nf.ng.Bridge,a.nf.Port)}}}(this,function(f,j,i,b,d,g,k,c,h,e){var a=function(){f("#port-configuration").modal({scrollableContentStyle:"scrollable",headerText:"Configure Port",buttons:[{buttonText:"Apply",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){var o=f("#port-id").text();var m=j.select("#id-"+o).datum();var l={id:o,name:f("#port-name").val(),comments:f("#port-comments").val()};if(f("#port-concurrent-task-container").is(":visible")){l.concurrentlySchedulableTaskCount=f("#port-concurrent-tasks").val()}if(f("#port-enabled").hasClass("checkbox-unchecked")){l.state="DISABLED"}else{if(f("#port-enabled").hasClass("checkbox-checked")){l.state="STOPPED"}}var n={revision:k.getRevision(m),disconnectedNodeAcknowledged:g.isDisconnectionAcknowledged(),component:l};f.ajax({type:"PUT",data:JSON.stringify(n),url:m.uri,dataType:"json",contentType:"application/json"}).done(function(p){e.set(p);h.digest();f("#port-configuration").modal("hide")}).fail(i.handleConfigurationUpdateAjaxError)}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){f("#port-configuration").modal("hide")}}}],handler:{close:function(){f("#port-id").text("");f("#port-name").val("");f("#port-enabled").removeClass("checkbox-unchecked checkbox-checked");f("#port-concurrent-tasks").val("");f("#port-comments").val("")}}})};return{init:function(){a()},showConfiguration:function(m){if(c.isInputPort(m)||c.isOutputPort(m)){var n=m.datum();var l="checkbox-checked";if(n.component.state==="DISABLED"){l="checkbox-unchecked"}if(n.allowRemoteAccess===true){f("#port-concurrent-task-container").show()}else{f("#port-concurrent-task-container").hide()}f("#port-id").text(n.id);f("#port-name").val(n.component.name);f("#port-enabled").removeClass("checkbox-unchecked checkbox-checked").addClass(l);f("#port-concurrent-tasks").val(n.component.concurrentlySchedulableTaskCount);f("#port-comments").val(n.component.comments);f("#port-configuration").modal("show")}}}}));