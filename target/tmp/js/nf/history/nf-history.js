(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","nf.Common","nf.HistoryTable","nf.ErrorHandler","nf.Storage","nf.ClusterSummary"],function(f,g,e,h,d,c){return(nf.History=b(f,g,e,h,d,c))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.History=b(require("jquery"),require("nf.Common"),require("nf.HistoryTable"),require("nf.ErrorHandler"),require("nf.Storage"),require("nf.ClusterSummary")))}else{nf.History=b(a.$,a.nf.Common,a.nf.HistoryTable,a.nf.ErrorHandler,a.nf.Storage,a.nf.ClusterSummary)}}}(this,function(c,b,j,f,d,g){c(document).ready(function(){e.init()});var a={urls:{banners:"../nifi-api/flow/banners",about:"../nifi-api/flow/about",currentUser:"../nifi-api/flow/current-user"}};var h=function(){return c.ajax({type:"GET",url:a.urls.currentUser,dataType:"json"}).done(function(k){b.setCurrentUser(k)}).fail(f.handleAjaxError)};var i=function(){c("#refresh-button").click(function(){j.loadHistoryTable()});return c.Deferred(function(k){if(top===window){c.ajax({type:"GET",url:a.urls.banners,dataType:"json"}).done(function(p){if(b.isDefinedAndNotNull(p.banners)){if(b.isDefinedAndNotNull(p.banners.headerText)&&p.banners.headerText!==""){var m=c("#banner-header").text(p.banners.headerText).show();var o=function(q){var r=c("#"+q);r.css("top",(parseInt(m.css("height"),10)+parseInt(r.css("top"),10))+"px")};o("history")}if(b.isDefinedAndNotNull(p.banners.footerText)&&p.banners.footerText!==""){var l=c("#banner-footer").text(p.banners.footerText).show();var n=function(q){var r=c("#"+q);r.css("bottom",parseInt(l.css("height"),10)+"px")};n("history")}}k.resolve()}).fail(function(n,l,m){f.handleAjaxError(n,l,m);k.reject()})}else{k.resolve()}}).promise()};var e={init:function(){var k=h();d.init();c.when(k).done(function(l){if(g.isClustered()===true){c("#cluster-history-message").show()}j.init();j.loadHistoryTable();i().done(function(){var m=function(){if(top===window){c("body").css({height:c(window).height()+"px",width:c(window).width()+"px"});c("#history").css("margin",40);c("#history-refresh-container").css("margin",40)}j.resetTableSize()};c.ajax({type:"GET",url:a.urls.about,dataType:"json"}).done(function(p){var n=p.about;var o=n.title+" History";document.title=o;c("#history-header-text").text(o);m()}).fail(f.handleAjaxError);c(window).on("resize",function(u){m();var n=c(".dialog");for(var s=0,t=n.length;s<t;s++){if(c(n[s]).is(":visible")){setTimeout(function(w){w.modal("resize")},50,c(n[s]))}}var v=c('*[class*="slickgrid_"]');for(var r=0,t=v.length;r<t;r++){if(c(v[r]).is(":visible")){setTimeout(function(w){w.data("gridInstance").resizeCanvas()},50,c(v[r]))}}var p=c(".tab-container");var o=[];for(var q=0,t=p.length;q<t;q++){if(c(p[q]).is(":visible")){o.push(c("#"+c(p[q]).attr("id")+"-content"))}}c.each(o,function(w,x){b.toggleScrollable(x.get(0))})})})})}};return e}));