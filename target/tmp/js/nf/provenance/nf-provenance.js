(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery","angular","nf.Common","nf.ng.AppConfig","nf.ng.AppCtrl","nf.ng.ProvenanceLineage","nf.ng.ProvenanceTable","nf.ng.Bridge","nf.ErrorHandler","nf.Storage"],function(e,j,d,k,i,l,c,g,h,f){return(nf.ng.Provenance=b(e,j,d,k,i,l,c,g,h,f))})}else{if(typeof exports==="object"&&typeof module==="object"){module.exports=(nf.ng.Provenance=b(require("jquery"),require("angular"),require("nf.Common"),require("nf.ng.AppConfig"),require("nf.ng.AppCtrl"),require("nf.ng.ProvenanceLineage"),require("nf.ng.ProvenanceTable"),require("nf.ng.Bridge"),require("nf.ErrorHandler"),require("nf.Storage")))}else{nf.ng.Provenance=b(a.$,a.angular,a.nf.Common,a.nf.ng.AppConfig,a.nf.ng.AppCtrl,a.nf.ng.ProvenanceLineage,a.nf.ng.ProvenanceTable,a.nf.ng.Bridge,a.nf.ErrorHandler,a.nf.Storage)}}}(this,function(d,i,c,j,h,k,b,f,g,e){d(document).ready(function(){var l=i.module("ngProvenanceApp",["ngResource","ngRoute","ngMaterial","ngMessages"]);j.$inject=["$mdThemingProvider","$compileProvider"];h.$inject=["$scope"];a.$inject=["provenanceTableCtrl"];k.$inject=[];b.$inject=["provenanceLineageCtrl"];l.config(j);l.controller("ngProvenanceAppCtrl",h);l.service("provenanceCtrl",a);l.service("provenanceLineageCtrl",k);l.service("provenanceTableCtrl",b);f.injector=i.bootstrap(d("body"),["ngProvenanceApp"],{strictDi:true});f.injector.get("provenanceCtrl").init()});var a=function(o){var n={urls:{clusterSummary:"../nifi-api/flow/cluster/summary",banners:"../nifi-api/flow/banners",about:"../nifi-api/flow/about",currentUser:"../nifi-api/flow/current-user"}};var t=null;var m=function(){return d.ajax({type:"GET",url:n.urls.clusterSummary}).done(function(u){t=u.clusterSummary.connectedToCluster}).fail(g.handleAjaxError)};var l=function(){return d.ajax({type:"GET",url:n.urls.about,dataType:"json"}).done(function(v){var u=v.about;var w=u.title+" Data Provenance";d("#nifi-controller-uri").text(u.uri);d(".timezone").text(u.timezone);if(!c.isBlank(u.contentViewerUrl)){d("#nifi-content-viewer-url").text(u.contentViewerUrl)}document.title=w;d("#provenance-header-text").text(w)}).fail(g.handleAjaxError)};var q=function(){return d.ajax({type:"GET",url:n.urls.currentUser,dataType:"json"}).done(function(u){c.setCurrentUser(u)}).fail(g.handleAjaxError)};var p=function(){d("#refresh-button").click(function(){o.loadProvenanceTable()});return d.Deferred(function(u){if(top===window){d.ajax({type:"GET",url:n.urls.banners,dataType:"json"}).done(function(z){if(c.isDefinedAndNotNull(z.banners)){if(c.isDefinedAndNotNull(z.banners.headerText)&&z.banners.headerText!==""){var w=d("#banner-header").text(z.banners.headerText).show();var y=function(A){var B=d("#"+A);B.css("top",(parseInt(w.css("height"),10)+parseInt(B.css("top"),10))+"px")};y("provenance")}if(c.isDefinedAndNotNull(z.banners.footerText)&&z.banners.footerText!==""){var v=d("#banner-footer").text(z.banners.footerText).show();var x=function(A){var B=d("#"+A);B.css("bottom",parseInt(v.css("height"),10)+"px")};x("provenance")}}u.resolve()}).fail(function(x,v,w){g.handleAjaxError(x,v,w);u.reject()})}else{u.resolve()}}).promise()};function s(){}s.prototype={constructor:s,init:function(){e.init();d.when(l(),q(),m()).done(function(){o.init(t).done(function(){var w={};var x=d("#initial-component-query").text();if(d.trim(x)!==""){d("input.searchable-component-id").val(x);w.ProcessorID=x}var u=d("#initial-flowfile-query").text();if(d.trim(u)!==""){d("input.searchable-flowfile-uuid").val(u);w.FlowFileUUID=u}if(d.isEmptyObject(w)){o.loadProvenanceTable()}else{o.loadProvenanceTable({searchTerms:w})}var v=function(){if(top===window){d("body").css({height:d(window).height()+"px",width:d(window).width()+"px"});d("#provenance").css("margin",40);d("#provenance-refresh-container").css({bottom:"0px",left:"0px",right:"0px"})}o.resetTableSize()};p().done(function(){v()});d(window).on("resize",function(F){v();var y=d(".dialog");for(var D=0,E=y.length;D<E;D++){if(d(y[D]).is(":visible")){setTimeout(function(H){H.modal("resize")},50,d(y[D]))}}var G=d('*[class*="slickgrid_"]');for(var C=0,E=G.length;C<E;C++){if(d(G[C]).is(":visible")){setTimeout(function(H){H.data("gridInstance").resizeCanvas()},50,d(G[C]))}}var A=d(".tab-container");var z=[];for(var B=0,E=A.length;B<E;B++){if(d(A[B]).is(":visible")){z.push(d("#"+d(A[B]).attr("id")+"-content"))}}d.each(z,function(H,I){c.toggleScrollable(I.get(0))})})})})}};var r=new s();return r};return a}));